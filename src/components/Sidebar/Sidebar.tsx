import type { ReactNode } from "react";
import { useSidebarContext } from "../../context/sidebarContext";


const sidebarIcons: { [key:string ]: TIconLink } = 
    {
        'home' : {
            title: 'home',
            href: '/',
            active: false,
            svg: <FaHome/>
        }
    };

export default function Sidebar () {
    const [ icons, setIcons  ] = React.useState<{ [key:string ]: TIconLink }>(sidebarIcons);
    const location = useLocation();
    const { expanded } = useSidebarContext();

    React.useEffect(() => {
        console.log(location, icons, expanded);
        for (const key in Object.keys(icons)) {
            const iconLink = icons[key];
            if (iconLink.title === location.pathname ) {
                if (!iconLink.active) {
                    setIcons((prev) => ({ ...prev, [iconLink.title]: { ...iconLink, active: true }}));
                }
            }
        }
        
    });
    return (
        <aside id="sidebar" className="sidebar-container">
            <header className="sidebar-header">
                <div className="d-flex justify-content-between align-items-center">
                    <BrandLogo></BrandLogo>
                    <SidebarToggler role="close" expanded={expanded}></SidebarToggler>
                </div>
            </header>
            <div className="sidebar-content">
                <IconList icons={Object.values(icons)} expanded={expanded}></IconList>
            </div>
            <div className="sidebar-footer">

            </div>
        </aside>
    
  );
}
export type TIconLink = {
    title: string,
    href: string,
    active?: boolean,
    svg?: ReactNode,
}
export function IconList({ icons, expanded=false }: { icons: TIconLink[], expanded?: boolean }) {
    return (
        <ul className="icon-list">
            {icons.map((icon) => {
                const clazz = `icon-list-li ${icon.active ? 'active':''}`;
                return (
                    <li className={clazz}>
                        <a className="link" href={icon.href}>
                            {icon.svg}
                            { expanded && <span>{icon.title}</span>}
                        </a>
                    </li>
                )
            })}
        </ul>
    )
}

interface ISidebarTogglerProps {
    expanded: boolean;
    role: 'open' | 'close';
}
export function SidebarToggler({ expanded, role='open' }: ISidebarTogglerProps ) {
    const toOpen = role === 'open';
    const clazzRole = toOpen ? 'sidebar-opener' : 'sidebar-closer';
    const visibility = toOpen ? expanded ? 'hidden d-none' : 'visible d-block' : expanded ? 'visible d-block' : 'hidden d-none';
    const clazz = `sidebar-toggler ${clazzRole} ${visibility}`;
    return ( 
        <button className={clazz}>
            <SVGArrow attributes={{ viewBox: "500px 500px 500px 500px"}}></SVGArrow>
        </button>
    )
}

import * as React from "react";
import { FaHome } from "react-icons/fa";
import { useLocation } from "react-router";
import BrandLogo from "../Header/BrandLogo";
const SVGArrow = ({ attributes }: { attributes : React.SVGAttributes<SVGSVGElement> }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="50px"
    height="50px"
    {...attributes}
  >
    <defs>
      <linearGradient
        gradientUnits="userSpaceOnUse"
        x1={-1067.233}
        y1={314.597}
        x2={-1067.233}
        y2={436.342}
        id="gradient-0"
      >
        <stop
          offset={0}
          style={{
            stopColor: "rgb(13.333% 6.6667% 6.6667%)",
          }}
        />
        <stop
          offset={1}
          style={{
            stopColor: "rgb(11.557% 3.2388% 3.144%)",
          }}
        />
      </linearGradient>
    </defs>
    <g transform="matrix(1.115633, 0, 0, 1.115633, 134.693741, 45.131462)">
      <path
        fill="#fff"
        d="m -1227.7455,394.60719 c 1.0626,-2.12535 85.7225,-265.31489 85.7225,-265.31489 l 82.5346,-22.67043 1.0627,9.20986 -81.1177,241.22756 18.0655,3.89648 -57.0303,26.56691 c 0,0 -10.6268,10.27254 -3.188,11.68944 7.4387,1.4169 183.13456,37.90213 185.96836,37.5479 2.83381,-0.35422 46.75777,-28.33804 46.75777,-31.17184 0,-2.8338 -4.95916,-8.85564 -4.95916,-8.85564 l -63.40637,-5.31338 27.98382,-11.68944 72.61622,18.77395 -77.57538,51.71692 c 0,0 -214.66066,-44.27818 -220.68246,-45.69509 -6.0218,-1.4169 -14.169,-8.14718 -12.7521,-9.91831 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        d="m -1179.4879,399.75849 c -5.5105,-0.50095 -7.7648,-3.75713 -4.2581,-6.01141 3.5067,-2.25428 4.759,-6.26188 4.759,-6.26188 l 51.3475,-24.04562 c 0,0 29.3056,5.0095 60.114,0.25047 30.8085,-4.75903 58.6112,-16.78184 67.87881,-20.78944 9.26758,-4.00761 49.09314,-28.30371 49.09314,-28.30371 l -12.02281,48.09125 -54.60364,26.80085 26.55042,3.25618 c 0,0 41.07793,5.00951 41.57889,7.01331 0.50095,2.0038 -19.2866,18.03421 -23.54468,21.29039 -4.25808,3.25618 -21.03992,15.77994 -24.2961,15.27899 -3.25613,-0.50095 -45.08553,-8.0152 -45.08553,-8.0152 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
        style={{
          strokeDashoffset: 23,
          strokeWidth: "19.8705px",
          strokeOpacity: 0.44,
          stroke: "url(#gradient-0)",
          fill: "rgb(150, 96, 96)",
        }}
      />
      <path
        fill="#623a48"
        d="m -1126.6339,141.62489 -15.1173,36.33447 23.0737,-5.3043 11.139,-35.27361 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#4c6b47"
        d="m -1143.6077,178.22458 -9.0173,31.5606 22.8085,-4.24344 10.3434,-32.35625 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#d9b962"
        d="m -1152.8902,210.31561 c -0.2653,1.06086 -10.8739,36.06926 -10.8739,36.06926 l 24.3998,-6.09995 9.5478,-33.68232 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#f2b072"
        d="m -1164.8249,247.18052 -8.4869,33.41711 21.2172,-4.50866 11.6695,-35.53883 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#de6252"
        d="m -1174.9031,282.71935 -10.8738,37.66055 22.8085,-8.48689 10.8738,-34.47797 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#cd4352"
        d="m -1188.1639,321.17554 -10.8738,43.7605 21.2172,-9.28253 13.7912,-41.90399 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#e35e5e"
        d="m -1175.4335,354.32744 23.6041,-10.07818 c 0,0 12.9956,-42.16921 11.6695,-41.90399 -1.3261,0.26521 -23.339,10.34339 -23.339,10.34339 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#f29e76"
        d="m -1162.1728,311.09737 23.0737,-9.81296 5.5696,-27.31716 -17.7695,2.65215 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#f1c276"
        d="m -1130.347,272.11074 -22.278,3.97823 13.2607,-36.86491 17.7694,-4.24344 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#8d8d50"
        d="m -1139.6295,238.42842 20.4216,-5.03909 9.5477,-32.09103 -19.6259,4.50865 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#5f5f61"
        d="m -1127.96,205.01131 17.5042,-4.24344 11.6694,-33.41711 -20.952,5.56952 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        fill="#6b4b65"
        d="m -1118.4123,171.32899 20.952,-5.56952 11.4043,-33.68233 -21.7477,4.77388 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
      <path
        d="m -1061.1304,103.59138 c -1.0096,0 -8.9398,2.1089 -17.6211,4.6856 -8.6813,2.5767 -24.1845,6.8128 -34.4511,9.414 -34.6027,8.7673 -32.1147,7.6213 -35.4141,16.3086 -4.9368,12.9987 -24.8201,73.1863 -31.8008,96.2598 -3.6608,12.1 -12.711,40 -20.1113,62 -17.1403,50.9551 -30.7044,98.4731 -29.7578,104.252 0.5577,3.4048 1.8163,4.7771 6.3125,6.8906 13.5083,6.3496 33.7444,10.7136 192.1055,41.4218 15.4,2.9864 29.8,5.9785 31.99995,6.6504 7.0507,2.1533 8.91902,1.5848 18.54882,-5.6504 14.926,-11.2141 21.67696,-15.7204 38.78516,-25.8867 30.1236,-17.9003 34.07505,-21.4329 27.09375,-24.2168 -3.2313,-1.2885 -37.74101,-9.4758 -56.82031,-13.4804 -6.0824,-1.2767 -12.33399,-2.82898 -11.80469,-3.0664 8.98684,-4.03113 15.18978,-8.04367 21.14453,-11.77162 3.01454,-1.88723 6.56611,-5.30248 9.7207,-13.68348 8.05151,-21.391 9.81832,-44.793 3.38282,-44.793 -1.2675,0 -3.35071,1.156 -4.62891,2.5684 -4.1762,4.6147 -19.7642,14.2829 -36.625,22.7168 -33.34812,16.6812 -52.67592,22.783 -83.24412,26.2754 -18.0429,2.0614 -18.8836,2.0394 -38.2774,-0.9473 -10.9062,-1.6796 -20.5545,-3.5019 -21.4394,-4.0488 -1.8954,-1.1714 -1.4767,-2.6714 12.0644,-43.2305 5.1415,-15.4 15.0085,-45.0999 21.9258,-66 6.9173,-20.9 19.2501,-57.668 27.4063,-81.707 8.1563,-24.039 15.1849,-46.2991 15.6191,-49.4668 0.8481,-6.1876 -1.0501,-11.4942 -4.1133,-11.4942 z m -0.3984,6.668 c 1.9135,0 0.2934,5.3013 -7.9473,26 -6.6983,16.8248 -38.8012,112.0953 -56.1601,166.666 -3.7324,11.7334 -8.99,27.634 -11.6836,35.334 l -4.8985,14 -22.1582,9.8965 c -12.1874,5.4432 -27.2588,11.9162 -33.4921,14.3847 -6.2333,2.4686 -14.497,5.9646 -18.3633,7.7696 -7.68,3.5856 -8.3028,3.7577 -8.3028,2.2929 0,-0.5439 10.7153,-33.0945 23.8125,-72.3339 13.0971,-39.2395 31.7202,-95.6438 41.3848,-125.3438 9.6646,-29.7 18.0015,-54.8012 18.5273,-55.7812 0.5259,-0.9801 9.9536,-4.0555 20.9493,-6.834 10.9958,-2.7784 28.3291,-7.528 38.5195,-10.5528 10.1905,-3.0249 19.1068,-5.498 19.8125,-5.498 z m -25.6738,19.3184 c -4.7851,-0.0198 -17.9309,2.9437 -28,6.3125 -4.7667,1.5948 -9.566,2.9298 -10.666,2.9668 -6.0647,0.2042 -25.4282,53.0007 -49.6602,135.4023 -6.5871,22.3995 -24.9649,83.4134 -26.2637,87.1953 -0.7294,2.1242 -1.0079,4.3742 -0.6211,5 1.1188,1.8104 2.1743,1.5065 19.4746,-5.5976 21.2142,-8.7114 30.6968,-13.4464 31.9043,-15.9317 0.5345,-1.1 3.9852,-12.5007 7.67,-25.334 14.0142,-48.8089 24.4223,-82.219 39.9589,-128.2851 8.8332,-26.1908 16.6326,-48.6908 17.3321,-50 0.6994,-1.3093 1.4814,-4.4803 1.7383,-7.0469 0.4214,-4.2106 0.1403,-4.6686 -2.8672,-4.6816 z m -3.2012,5.0351 c 0.1708,0.1715 -1.9168,6.7822 -4.6387,14.6895 l -4.9472,14.3769 -16.2305,5.4805 c 4.5528,-14.2156 8.0488,-24.9779 9.9629,-30.586 7.9177,-2.2594 15.5519,-4.2636 15.8535,-3.9609 z m -19.5078,5.0332 c -2.152,5.9095 -5.9255,17.1653 -10.4375,30.877 -9.6555,3.2144 -17.5195,5.4474 -17.5195,4.9023 0,-1.6128 12.0879,-29.6788 13.3515,-31 0.4772,-0.4989 7.3135,-2.6411 14.6055,-4.7793 z m 6.0879,31.8594 c 0.4028,0.043 0.6211,0.1585 0.6211,0.3535 0,2.3033 -6.9923,24.3367 -8.125,25.6016 -0.5265,0.588 -7.3765,2.7023 -15.4239,4.873 2.9462,-9.279 6.2167,-19.6383 8.752,-27.5703 2.2506,-0.6286 4.8406,-1.2941 6.4648,-1.7754 3.6332,-1.0765 6.5026,-1.6115 7.711,-1.4824 z m -18.3086,4.3945 c -2.7305,8.3385 -5.8228,17.8918 -8.959,27.5996 -8.2922,2.1403 -15.9427,4.0528 -16.4434,4.0664 -1.6913,0.0455 -1.023,-2.8528 3.4981,-15.166 l 4.3535,-11.8574 9.9062,-2.543 c 2.2835,-0.5861 4.8619,-1.3416 7.6446,-2.0996 z m 9.5058,28.7324 -4.3886,13.0879 -4.3868,13.0899 -6.7539,1.7109 c -1.949,0.4938 -5.3341,1.6159 -9.125,2.9727 3.1844,-10.0678 5.7816,-18.2032 8.8008,-27.7207 4.9361,-0.9659 10.9572,-2.1392 12.2324,-2.4004 z m -20.123,3.9805 c -2.9852,9.2566 -6.0939,18.956 -9.2012,28.6582 -2.0085,0.7608 -4.0202,1.4793 -5.9121,2.252 -10.5134,4.2942 -12.8327,4.862 -12.3125,3.0136 0.3525,-1.2527 2.5971,-8.6069 4.9902,-16.3418 l 4.3516,-14.0625 15.4824,-3.0097 c 1.1596,-0.2253 1.4559,-0.2866 2.6016,-0.5098 z m 7.9277,28.9141 c 0.3084,0.3085 -1.339,7.0503 -3.6601,14.9804 -2.321,7.9301 -4.5011,15.4018 -4.8457,16.6036 -0.4325,1.5085 -2.8087,2.4565 -7.6739,3.0644 -1.9221,0.2402 -4.964,0.7291 -8.3027,1.3184 3.4857,-11.0336 6.4007,-20.2446 10.0234,-31.7032 7.7812,-2.5653 14.2048,-4.5177 14.459,-4.2636 z m -19.0586,5.7578 c -4.6515,14.5403 -5.5899,17.5291 -9.8945,31.0625 -1.9864,0.3756 -4.0164,0.7382 -5.8262,1.1152 l -11.5547,2.4082 0.8438,-3.4726 c 0.464,-1.9098 2.4039,-8.2595 4.3105,-14.1094 l 3.4668,-10.6367 18.5762,-6.3418 c 0.03,-0.0103 0.048,-0.0152 0.078,-0.0254 z m 5.2618,34.1367 c 1.0087,-0.0679 1.6319,-0.0594 1.7402,0.0488 0.3055,0.3056 -0.8424,5.484 -2.5508,11.5078 -2.5293,8.9183 -3.7252,11.2134 -6.4394,12.3497 -1.283,0.5371 -8.2199,3.6318 -14.2305,6.3105 2.7001,-8.5316 5.9453,-18.7981 9.0371,-28.584 5.0959,-0.7741 10.0228,-1.4697 12.4434,-1.6328 z m -16.8653,2.3008 c -4.23,13.308 -6.4851,20.3555 -9.582,30.1191 -0.5202,0.233 -0.6141,0.2696 -1.1367,0.5039 -9.35,4.1927 -17,7.034 -17,6.3125 0,-2.1089 9.583,-32.2961 10.6172,-33.4453 0.5109,-0.5676 8.721,-2.126 17.1015,-3.4902 z m 9.9219,27.8437 -0.6563,3.6797 c -0.3612,2.0238 -2.0335,9.8212 -3.7148,17.3281 -2.4785,11.067 -3.5716,13.813 -5.7793,14.5137 -1.2487,0.3963 -9.8108,4.1078 -18.2129,7.7969 1.5035,-4.4499 5.5607,-17.1317 11.5645,-36.0859 2.9415,-1.2344 6.3548,-2.5958 8.3125,-3.4649 z m -21.7363,9.2891 c -3.2689,10.3045 -11.0426,34.7702 -11.4395,35.9609 -0.019,0.0587 -0.02,0.093 -0.039,0.1504 -9.6444,4.2681 -18.1675,7.959 -18.4531,7.959 -0.3063,0 -0.3055,-0.7494 0,-1.666 0.3055,-0.9167 2.6894,-8.5667 5.2969,-17 2.6075,-8.4334 5.1889,-15.9725 5.7363,-16.7539 0.5473,-0.7813 6.0949,-3.4417 12.3282,-5.9121 2.0663,-0.8189 4.1664,-1.7508 6.5703,-2.7383 z m 213.56637,2.082 -0.9336,5.836 c -0.5132,3.2096 -2.53022,12.2008 -4.48242,19.9824 l -3.54883,14.1484 -10.58594,6.2657 c -20.813,12.3168 -55.06418,23.4459 -87.25198,28.3496 -17.1283,2.6094 -50.6877,3.6948 -63.3339,2.0488 -5.1333,-0.6681 -17.434,-2.1796 -27.334,-3.3594 -20.8076,-2.4799 -24.6115,-3.2426 -23.0977,-4.623 0.6037,-0.5505 8.8984,-4.1219 18.4317,-7.9375 9.5333,-3.8155 19.1889,-8.0803 21.457,-9.4766 3.798,-2.3381 5.2938,-2.4284 18.9394,-1.1543 11.5928,1.0824 19.8344,0.9389 37.877,-0.6601 35.7084,-3.1644 54.0601,-8.4456 87.06053,-25.0489 17.4843,-8.7968 25.65119,-13.8968 32.40039,-20.2363 z m -183.21097,40.7871 c 4.1459,0.1473 11.4626,2.192 8.5977,2.4024 -3.0553,0.2245 -43.167,17.5715 -49.2402,21.2949 -4.0076,2.4569 -5.5398,4.2021 -5.125,5.8379 0.3254,1.2833 0.047,2.332 -0.6172,2.332 -0.6646,0 -1.2071,0.9 -1.2071,2 0,1.1 0.2353,2 0.5235,2 3.5755,0 111.6764,22.0385 109.8574,22.3965 -1.1041,0.2174 -7.9426,-0.8693 -15.1953,-2.4141 -7.2527,-1.5448 -20.0862,-4.0025 -28.5195,-5.4609 -8.4333,-1.4583 -17.4333,-3.2039 -20,-3.8789 -2.5667,-0.675 -13.3667,-2.7273 -24,-4.5605 -10.6333,-1.8331 -21.2827,-3.7261 -23.6661,-4.2071 -2.787,-0.5625 -4.3339,-0.3529 -4.3339,0.5879 0,1.8767 9.737,4.6792 30.666,8.8262 19.2357,3.8116 42.0324,8.4771 88,18.0059 81.81736,16.9598 72.79546,16.3816 89.99996,5.748 5.8666,-3.6261 14.318,-8.5238 18.7793,-10.8848 13.1487,-6.9585 17.49398,-11.1586 17.30078,-16.7226 -0.0902,-2.5961 -0.74508,-5.2925 -1.45508,-5.9922 -1.7972,-1.7712 -27.35966,-5.2649 -47.19726,-6.4512 l -16.5742,-0.9922 9.6426,-3.7558 c 7.11926,-2.7735 10.76056,-3.5153 13.90816,-2.8282 6.9719,1.522 62.53666,16.4137 63.00976,16.8868 0.3868,0.3868 -8.08303,5.6319 -36.39453,22.5429 -4.5733,2.7317 -13.93463,9.2097 -20.80273,14.3946 -6.8681,5.1849 -12.72773,9.3603 -13.01953,9.2793 -7.82923,-2.1754 -23.44793,-5.4248 -60.52933,-12.5899 -115.9484,-22.4042 -163.0629,-32.298 -169.1289,-35.5195 -2.4667,-1.31 3.561,-4.3389 36.461,-18.3164 4.7666,-2.0251 17.183,-7.3736 27.5918,-11.8867 10.4089,-4.5131 20.6101,-8.1473 22.6679,-8.0743 z m 117.793,33.5743 c 4.1024,-0.2417 8.8528,0.1173 17.9473,0.8593 25.33546,2.067 46.22623,5.3969 45.63863,7.2754 -0.4264,1.3636 -8.12967,6.1919 -28.45117,17.8262 -4.163,2.3833 -8.53294,4.2561 -9.71094,4.1621 -20.08052,-1.596 -65.78472,-8.7765 -95.47652,-15 l -14.666,-3.0742 13.3339,-0.9082 c 20.4827,-1.3951 42.6241,-4.6375 57.3321,-8.3965 6.496,-1.6602 9.9503,-2.5025 14.0527,-2.7441 z m -35.5742,27.9062 c 2.2157,0.1045 7.0348,0.7101 12.4336,1.5938 10.2871,1.6838 47.09333,6.1269 50.75583,6.1269 0.4104,0 -0.34067,1.1993 -1.66797,2.666 -2.8508,3.15 -1.5832,3.197 -19.99996,-0.7324 -8.0667,-1.7211 -21.1338,-4.4421 -29.0391,-6.0469 -7.9053,-1.6048 -14.0942,-3.1968 -13.7539,-3.5371 0.085,-0.0851 0.5329,-0.1051 1.2715,-0.0703 z"
        transform="translate(720.9896,255.85209) matrix(0.72175418,0,0,0.72175418,167.0086,-330.6196)"
      />
    </g>
  </svg>
);
